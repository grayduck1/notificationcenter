/* AppItem.c generated by valac 0.42.5, the Vala compiler
 * generated from AppItem.vala, do not modify */

/*
* Copyright (c) 2011-2020 NotificationCenter
*
* This program is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public
* License as published by the Free Software Foundation; either
* version 2 of the License, or (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
* General Public License for more details.
*
* You should have received a copy of the GNU General Public
* License along with this program; if not, write to the
* Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
* Boston, MA 02110-1301 USA
*
* Authored by: Juan Pablo Lozano <libredeb@gmail.com>
*/


#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <float.h>
#include <math.h>
#include <stdlib.h>
#include <string.h>
#include <cairo.h>
#include <gdk/gdk.h>


#define NOTIFICATION_CENTER_FRONTEND_TYPE_APP_ITEM (notification_center_frontend_app_item_get_type ())
#define NOTIFICATION_CENTER_FRONTEND_APP_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), NOTIFICATION_CENTER_FRONTEND_TYPE_APP_ITEM, NotificationCenterFrontendAppItem))
#define NOTIFICATION_CENTER_FRONTEND_APP_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), NOTIFICATION_CENTER_FRONTEND_TYPE_APP_ITEM, NotificationCenterFrontendAppItemClass))
#define NOTIFICATION_CENTER_FRONTEND_IS_APP_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), NOTIFICATION_CENTER_FRONTEND_TYPE_APP_ITEM))
#define NOTIFICATION_CENTER_FRONTEND_IS_APP_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), NOTIFICATION_CENTER_FRONTEND_TYPE_APP_ITEM))
#define NOTIFICATION_CENTER_FRONTEND_APP_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), NOTIFICATION_CENTER_FRONTEND_TYPE_APP_ITEM, NotificationCenterFrontendAppItemClass))

typedef struct _NotificationCenterFrontendAppItem NotificationCenterFrontendAppItem;
typedef struct _NotificationCenterFrontendAppItemClass NotificationCenterFrontendAppItemClass;
typedef struct _NotificationCenterFrontendAppItemPrivate NotificationCenterFrontendAppItemPrivate;

#define NOTIFICATION_CENTER_FRONTEND_TYPE_COLOR (notification_center_frontend_color_get_type ())
typedef struct _NotificationCenterFrontendColor NotificationCenterFrontendColor;
enum  {
	NOTIFICATION_CENTER_FRONTEND_APP_ITEM_0_PROPERTY,
	NOTIFICATION_CENTER_FRONTEND_APP_ITEM_NUM_PROPERTIES
};
static GParamSpec* notification_center_frontend_app_item_properties[NOTIFICATION_CENTER_FRONTEND_APP_ITEM_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _cairo_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_destroy (var), NULL)))
#define _cairo_pattern_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_pattern_destroy (var), NULL)))

struct _NotificationCenterFrontendAppItem {
	GtkEventBox parent_instance;
	NotificationCenterFrontendAppItemPrivate * priv;
};

struct _NotificationCenterFrontendAppItemClass {
	GtkEventBoxClass parent_class;
};

struct _NotificationCenterFrontendColor {
	gdouble R;
	gdouble G;
	gdouble B;
	gdouble A;
};

struct _NotificationCenterFrontendAppItemPrivate {
	GdkPixbuf* icon;
	NotificationCenterFrontendColor prominent;
	gchar* label;
	GtkBox* wrapper;
	gint icon_size;
	gint current_frame;
};


static gint NotificationCenterFrontendAppItem_private_offset;
static gpointer notification_center_frontend_app_item_parent_class = NULL;

GType notification_center_frontend_app_item_get_type (void) G_GNUC_CONST;
GType notification_center_frontend_color_get_type (void) G_GNUC_CONST;
NotificationCenterFrontendColor* notification_center_frontend_color_dup (const NotificationCenterFrontendColor* self);
void notification_center_frontend_color_free (NotificationCenterFrontendColor* self);
#define NOTIFICATION_CENTER_FRONTEND_APP_ITEM_FPS 24
#define NOTIFICATION_CENTER_FRONTEND_APP_ITEM_DURATION 200
#define NOTIFICATION_CENTER_FRONTEND_APP_ITEM_RUN_LENGTH ((gint) (NOTIFICATION_CENTER_FRONTEND_APP_ITEM_DURATION / NOTIFICATION_CENTER_FRONTEND_APP_ITEM_FPS))
NotificationCenterFrontendAppItem* notification_center_frontend_app_item_new (gint size);
NotificationCenterFrontendAppItem* notification_center_frontend_app_item_construct (GType object_type,
                                                                                    gint size);
static gboolean notification_center_frontend_app_item_draw_icon (NotificationCenterFrontendAppItem* self,
                                                          GtkWidget* widget,
                                                          cairo_t* ctx);
static gboolean _notification_center_frontend_app_item_draw_icon_gtk_widget_draw (GtkWidget* _sender,
                                                                           cairo_t* cr,
                                                                           gpointer self);
static gboolean notification_center_frontend_app_item_draw_background (NotificationCenterFrontendAppItem* self,
                                                                GtkWidget* widget,
                                                                cairo_t* ctx);
static gboolean _notification_center_frontend_app_item_draw_background_gtk_widget_draw (GtkWidget* _sender,
                                                                                 cairo_t* cr,
                                                                                 gpointer self);
static gboolean __lambda7_ (NotificationCenterFrontendAppItem* self);
void notification_center_frontend_app_item_focus_in (NotificationCenterFrontendAppItem* self);
static gboolean ___lambda7__gtk_widget_focus_in_event (GtkWidget* _sender,
                                                GdkEventFocus* event,
                                                gpointer self);
static gboolean __lambda9_ (NotificationCenterFrontendAppItem* self);
void notification_center_frontend_app_item_focus_out (NotificationCenterFrontendAppItem* self);
static gboolean ___lambda9__gtk_widget_focus_out_event (GtkWidget* _sender,
                                                 GdkEventFocus* event,
                                                 gpointer self);
void notification_center_frontend_app_item_change_app (NotificationCenterFrontendAppItem* self,
                                                       GdkPixbuf* new_icon,
                                                       const gchar* new_name,
                                                       const gchar* new_tooltip);
void notification_center_frontend_utilities_average_color (GdkPixbuf* source,
                                                           NotificationCenterFrontendColor* result);
static gboolean __lambda8_ (NotificationCenterFrontendAppItem* self);
static gboolean ___lambda8__gsource_func (gpointer self);
static gboolean __lambda10_ (NotificationCenterFrontendAppItem* self);
static gboolean ___lambda10__gsource_func (gpointer self);
void notification_center_frontend_utilities_truncate_text (cairo_t* context,
                                                           GtkAllocation* size,
                                                           guint padding,
                                                           const gchar* input,
                                                           gchar* * truncated,
                                                           cairo_text_extents_t* truncated_extents);
void notification_center_frontend_utilities_draw_rounded_rectangle (cairo_t* context,
                                                                    gdouble radius,
                                                                    gdouble offset,
                                                                    GtkAllocation* size);
static void notification_center_frontend_app_item_finalize (GObject * obj);


static inline gpointer
notification_center_frontend_app_item_get_instance_private (NotificationCenterFrontendAppItem* self)
{
	return G_STRUCT_MEMBER_P (self, NotificationCenterFrontendAppItem_private_offset);
}


static gboolean
_notification_center_frontend_app_item_draw_icon_gtk_widget_draw (GtkWidget* _sender,
                                                                  cairo_t* cr,
                                                                  gpointer self)
{
	gboolean result;
	result = notification_center_frontend_app_item_draw_icon ((NotificationCenterFrontendAppItem*) self, _sender, cr);
	return result;
}


static gboolean
_notification_center_frontend_app_item_draw_background_gtk_widget_draw (GtkWidget* _sender,
                                                                        cairo_t* cr,
                                                                        gpointer self)
{
	gboolean result;
	result = notification_center_frontend_app_item_draw_background ((NotificationCenterFrontendAppItem*) self, _sender, cr);
	return result;
}


static gboolean
__lambda7_ (NotificationCenterFrontendAppItem* self)
{
	gboolean result = FALSE;
	notification_center_frontend_app_item_focus_in (self);
	result = TRUE;
	return result;
}


static gboolean
___lambda7__gtk_widget_focus_in_event (GtkWidget* _sender,
                                       GdkEventFocus* event,
                                       gpointer self)
{
	gboolean result;
	result = __lambda7_ ((NotificationCenterFrontendAppItem*) self);
	return result;
}


static gboolean
__lambda9_ (NotificationCenterFrontendAppItem* self)
{
	gboolean result = FALSE;
	notification_center_frontend_app_item_focus_out (self);
	result = TRUE;
	return result;
}


static gboolean
___lambda9__gtk_widget_focus_out_event (GtkWidget* _sender,
                                        GdkEventFocus* event,
                                        gpointer self)
{
	gboolean result;
	result = __lambda9_ ((NotificationCenterFrontendAppItem*) self);
	return result;
}


NotificationCenterFrontendAppItem*
notification_center_frontend_app_item_construct (GType object_type,
                                                 gint size)
{
	NotificationCenterFrontendAppItem * self = NULL;
	gint _tmp0_;
	gint _tmp1_;
	GtkBox* _tmp2_;
	GtkBox* _tmp3_;
	GtkBox* _tmp4_;
	self = (NotificationCenterFrontendAppItem*) g_object_new (object_type, NULL);
	self->priv->icon_size = size;
	gtk_event_box_set_visible_window ((GtkEventBox*) self, FALSE);
	gtk_widget_set_can_focus ((GtkWidget*) self, TRUE);
	_tmp0_ = self->priv->icon_size;
	_tmp1_ = self->priv->icon_size;
	gtk_widget_set_size_request ((GtkWidget*) self, _tmp0_ * 3, _tmp1_ + 30);
	_tmp2_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 0);
	g_object_ref_sink (_tmp2_);
	_g_object_unref0 (self->priv->wrapper);
	self->priv->wrapper = _tmp2_;
	_tmp3_ = self->priv->wrapper;
	g_signal_connect_object ((GtkWidget*) _tmp3_, "draw", (GCallback) _notification_center_frontend_app_item_draw_icon_gtk_widget_draw, self, 0);
	_tmp4_ = self->priv->wrapper;
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp4_);
	g_signal_connect_object ((GtkWidget*) self, "draw", (GCallback) _notification_center_frontend_app_item_draw_background_gtk_widget_draw, self, 0);
	g_signal_connect_object ((GtkWidget*) self, "focus-in-event", (GCallback) ___lambda7__gtk_widget_focus_in_event, self, 0);
	g_signal_connect_object ((GtkWidget*) self, "focus-out-event", (GCallback) ___lambda9__gtk_widget_focus_out_event, self, 0);
	return self;
}


NotificationCenterFrontendAppItem*
notification_center_frontend_app_item_new (gint size)
{
	return notification_center_frontend_app_item_construct (NOTIFICATION_CENTER_FRONTEND_TYPE_APP_ITEM, size);
}


static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}


void
notification_center_frontend_app_item_change_app (NotificationCenterFrontendAppItem* self,
                                                  GdkPixbuf* new_icon,
                                                  const gchar* new_name,
                                                  const gchar* new_tooltip)
{
	GdkPixbuf* _tmp0_;
	GdkPixbuf* _tmp1_;
	NotificationCenterFrontendColor _tmp2_ = {0};
	gchar* _tmp3_;
	GtkBox* _tmp4_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (new_icon != NULL);
	g_return_if_fail (new_name != NULL);
	g_return_if_fail (new_tooltip != NULL);
	self->priv->current_frame = 1;
	_tmp0_ = _g_object_ref0 (new_icon);
	_g_object_unref0 (self->priv->icon);
	self->priv->icon = _tmp0_;
	_tmp1_ = self->priv->icon;
	notification_center_frontend_utilities_average_color (_tmp1_, &_tmp2_);
	self->priv->prominent = _tmp2_;
	_tmp3_ = g_strdup (new_name);
	_g_free0 (self->priv->label);
	self->priv->label = _tmp3_;
	gtk_widget_set_tooltip_text ((GtkWidget*) self, new_tooltip);
	_tmp4_ = self->priv->wrapper;
	gtk_widget_queue_draw ((GtkWidget*) _tmp4_);
}


static gboolean
__lambda8_ (NotificationCenterFrontendAppItem* self)
{
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gint _tmp1_;
	gint _tmp4_;
	_tmp1_ = self->priv->current_frame;
	if (_tmp1_ >= NOTIFICATION_CENTER_FRONTEND_APP_ITEM_RUN_LENGTH) {
		_tmp0_ = TRUE;
	} else {
		gboolean _tmp2_;
		gboolean _tmp3_;
		g_object_get ((GtkWidget*) self, "has-focus", &_tmp2_, NULL);
		_tmp3_ = _tmp2_;
		_tmp0_ = !_tmp3_;
	}
	if (_tmp0_) {
		self->priv->current_frame = 1;
		result = FALSE;
		return result;
	}
	gtk_widget_queue_draw ((GtkWidget*) self);
	_tmp4_ = self->priv->current_frame;
	self->priv->current_frame = _tmp4_ + 1;
	result = TRUE;
	return result;
}


static gboolean
___lambda8__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda8_ ((NotificationCenterFrontendAppItem*) self);
	return result;
}


void
notification_center_frontend_app_item_focus_in (NotificationCenterFrontendAppItem* self)
{
	g_return_if_fail (self != NULL);
	g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) ((gint) (1000 / NOTIFICATION_CENTER_FRONTEND_APP_ITEM_FPS)), ___lambda8__gsource_func, g_object_ref (self), g_object_unref);
}


static gboolean
__lambda10_ (NotificationCenterFrontendAppItem* self)
{
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gint _tmp1_;
	gint _tmp4_;
	_tmp1_ = self->priv->current_frame;
	if (_tmp1_ >= NOTIFICATION_CENTER_FRONTEND_APP_ITEM_RUN_LENGTH) {
		_tmp0_ = TRUE;
	} else {
		gboolean _tmp2_;
		gboolean _tmp3_;
		g_object_get ((GtkWidget*) self, "has-focus", &_tmp2_, NULL);
		_tmp3_ = _tmp2_;
		_tmp0_ = _tmp3_;
	}
	if (_tmp0_) {
		self->priv->current_frame = 1;
		result = FALSE;
		return result;
	}
	gtk_widget_queue_draw ((GtkWidget*) self);
	_tmp4_ = self->priv->current_frame;
	self->priv->current_frame = _tmp4_ + 1;
	result = TRUE;
	return result;
}


static gboolean
___lambda10__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda10_ ((NotificationCenterFrontendAppItem*) self);
	return result;
}


void
notification_center_frontend_app_item_focus_out (NotificationCenterFrontendAppItem* self)
{
	g_return_if_fail (self != NULL);
	g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) ((gint) (1000 / NOTIFICATION_CENTER_FRONTEND_APP_ITEM_FPS)), ___lambda10__gsource_func, g_object_ref (self), g_object_unref);
}


static gboolean
notification_center_frontend_app_item_draw_icon (NotificationCenterFrontendAppItem* self,
                                                 GtkWidget* widget,
                                                 cairo_t* ctx)
{
	gboolean result = FALSE;
	GtkAllocation size = {0};
	GtkAllocation _tmp0_ = {0};
	cairo_t* context = NULL;
	GdkWindow* _tmp1_;
	cairo_t* _tmp2_;
	GdkPixbuf* _tmp3_;
	GtkAllocation _tmp4_;
	gint _tmp5_;
	GdkPixbuf* _tmp6_;
	gint _tmp7_;
	gint _tmp8_;
	GtkAllocation _tmp9_;
	gint _tmp10_;
	GtkAllocation _tmp11_;
	gint _tmp12_;
	cairo_text_extents_t extents = {0};
	GtkAllocation _tmp13_;
	const gchar* _tmp14_;
	gchar* _tmp15_ = NULL;
	cairo_text_extents_t _tmp16_ = {0};
	GtkAllocation _tmp17_;
	gint _tmp18_;
	GtkAllocation _tmp19_;
	gint _tmp20_;
	cairo_text_extents_t _tmp21_;
	gdouble _tmp22_;
	GtkAllocation _tmp23_;
	gint _tmp24_;
	GtkAllocation _tmp25_;
	gint _tmp26_;
	const gchar* _tmp27_;
	GtkAllocation _tmp28_;
	gint _tmp29_;
	GtkAllocation _tmp30_;
	gint _tmp31_;
	cairo_text_extents_t _tmp32_;
	gdouble _tmp33_;
	GtkAllocation _tmp34_;
	gint _tmp35_;
	GtkAllocation _tmp36_;
	gint _tmp37_;
	const gchar* _tmp38_;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (widget != NULL, FALSE);
	g_return_val_if_fail (ctx != NULL, FALSE);
	gtk_widget_get_allocation (widget, &_tmp0_);
	size = _tmp0_;
	_tmp1_ = gtk_widget_get_window (widget);
	_tmp2_ = gdk_cairo_create (_tmp1_);
	context = _tmp2_;
	_tmp3_ = self->priv->icon;
	_tmp4_ = size;
	_tmp5_ = _tmp4_.x;
	_tmp6_ = self->priv->icon;
	_tmp7_ = gdk_pixbuf_get_width (_tmp6_);
	_tmp8_ = _tmp7_;
	_tmp9_ = size;
	_tmp10_ = _tmp9_.width;
	_tmp11_ = size;
	_tmp12_ = _tmp11_.y;
	gdk_cairo_set_source_pixbuf (context, _tmp3_, _tmp5_ + ((_tmp8_ - _tmp10_) / (-2.0)), (gdouble) _tmp12_);
	cairo_paint (context);
	cairo_select_font_face (context, "Sans", CAIRO_FONT_SLANT_NORMAL, CAIRO_FONT_WEIGHT_NORMAL);
	cairo_set_font_size (context, 11.5);
	_tmp13_ = size;
	_tmp14_ = self->priv->label;
	notification_center_frontend_utilities_truncate_text (context, &_tmp13_, (guint) 10, _tmp14_, &_tmp15_, &_tmp16_);
	_g_free0 (self->priv->label);
	self->priv->label = _tmp15_;
	extents = _tmp16_;
	_tmp17_ = size;
	_tmp18_ = _tmp17_.x;
	_tmp19_ = size;
	_tmp20_ = _tmp19_.width;
	_tmp21_ = extents;
	_tmp22_ = _tmp21_.width;
	_tmp23_ = size;
	_tmp24_ = _tmp23_.y;
	_tmp25_ = size;
	_tmp26_ = _tmp25_.height;
	cairo_move_to (context, ((_tmp18_ + (_tmp20_ / 2)) - (_tmp22_ / 2)) + 1, (gdouble) (((_tmp24_ + _tmp26_) - 10) + 1));
	cairo_set_source_rgba (context, 0.0, 0.0, 0.0, 0.8);
	_tmp27_ = self->priv->label;
	cairo_show_text (context, _tmp27_);
	cairo_set_source_rgba (context, 1.0, 1.0, 1.0, 1.0);
	_tmp28_ = size;
	_tmp29_ = _tmp28_.x;
	_tmp30_ = size;
	_tmp31_ = _tmp30_.width;
	_tmp32_ = extents;
	_tmp33_ = _tmp32_.width;
	_tmp34_ = size;
	_tmp35_ = _tmp34_.y;
	_tmp36_ = size;
	_tmp37_ = _tmp36_.height;
	cairo_move_to (context, (_tmp29_ + (_tmp31_ / 2)) - (_tmp33_ / 2), (gdouble) ((_tmp35_ + _tmp37_) - 10));
	_tmp38_ = self->priv->label;
	cairo_show_text (context, _tmp38_);
	result = FALSE;
	_cairo_destroy0 (context);
	return result;
}


static gboolean
notification_center_frontend_app_item_draw_background (NotificationCenterFrontendAppItem* self,
                                                       GtkWidget* widget,
                                                       cairo_t* ctx)
{
	gboolean result = FALSE;
	GtkAllocation size = {0};
	GtkAllocation _tmp0_ = {0};
	cairo_t* context = NULL;
	GdkWindow* _tmp1_;
	cairo_t* _tmp2_;
	gdouble progress = 0.0;
	gint _tmp3_;
	gboolean _tmp5_;
	gboolean _tmp6_;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (widget != NULL, FALSE);
	g_return_val_if_fail (ctx != NULL, FALSE);
	gtk_widget_get_allocation (widget, &_tmp0_);
	size = _tmp0_;
	_tmp1_ = gtk_widget_get_window (widget);
	_tmp2_ = gdk_cairo_create (_tmp1_);
	context = _tmp2_;
	_tmp3_ = self->priv->current_frame;
	if (_tmp3_ > 1) {
		gint _tmp4_;
		_tmp4_ = self->priv->current_frame;
		progress = ((gdouble) NOTIFICATION_CENTER_FRONTEND_APP_ITEM_RUN_LENGTH) / ((gdouble) _tmp4_);
	} else {
		progress = (gdouble) 1;
	}
	g_object_get ((GtkWidget*) self, "has-focus", &_tmp5_, NULL);
	_tmp6_ = _tmp5_;
	if (_tmp6_) {
		gdouble dark = 0.0;
		cairo_pattern_t* gradient = NULL;
		NotificationCenterFrontendColor _tmp7_;
		gdouble _tmp8_;
		gdouble _tmp9_;
		NotificationCenterFrontendColor _tmp10_;
		gdouble _tmp11_;
		gdouble _tmp12_;
		NotificationCenterFrontendColor _tmp13_;
		gdouble _tmp14_;
		gdouble _tmp15_;
		cairo_pattern_t* _tmp16_;
		cairo_t* _tmp17_;
		cairo_pattern_t* _tmp18_;
		cairo_t* _tmp19_;
		GtkAllocation _tmp20_;
		cairo_t* _tmp21_;
		dark = 0.32;
		_tmp7_ = self->priv->prominent;
		_tmp8_ = _tmp7_.R;
		_tmp9_ = dark;
		_tmp10_ = self->priv->prominent;
		_tmp11_ = _tmp10_.G;
		_tmp12_ = dark;
		_tmp13_ = self->priv->prominent;
		_tmp14_ = _tmp13_.B;
		_tmp15_ = dark;
		_tmp16_ = cairo_pattern_create_rgba (_tmp8_ * _tmp9_, _tmp11_ * _tmp12_, _tmp14_ * _tmp15_, 0.8);
		gradient = _tmp16_;
		_tmp17_ = context;
		_tmp18_ = gradient;
		cairo_set_source (_tmp17_, _tmp18_);
		_tmp19_ = context;
		_tmp20_ = size;
		notification_center_frontend_utilities_draw_rounded_rectangle (_tmp19_, (gdouble) 10, 0.5, &_tmp20_);
		_tmp21_ = context;
		cairo_fill (_tmp21_);
		_cairo_pattern_destroy0 (gradient);
	} else {
		gint _tmp22_;
		_tmp22_ = self->priv->current_frame;
		if (_tmp22_ > 1) {
			cairo_pattern_t* gradient = NULL;
			cairo_pattern_t* _tmp23_;
			cairo_t* _tmp24_;
			cairo_pattern_t* _tmp25_;
			cairo_t* _tmp26_;
			GtkAllocation _tmp27_;
			cairo_t* _tmp28_;
			_tmp23_ = cairo_pattern_create_rgba (0.0, 0.0, 0.0, 0.0);
			gradient = _tmp23_;
			_tmp24_ = context;
			_tmp25_ = gradient;
			cairo_set_source (_tmp24_, _tmp25_);
			_tmp26_ = context;
			_tmp27_ = size;
			notification_center_frontend_utilities_draw_rounded_rectangle (_tmp26_, (gdouble) 10, 0.5, &_tmp27_);
			_tmp28_ = context;
			cairo_fill (_tmp28_);
			_cairo_pattern_destroy0 (gradient);
		}
	}
	result = FALSE;
	_cairo_destroy0 (context);
	return result;
}


static void
notification_center_frontend_app_item_class_init (NotificationCenterFrontendAppItemClass * klass)
{
	notification_center_frontend_app_item_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &NotificationCenterFrontendAppItem_private_offset);
	G_OBJECT_CLASS (klass)->finalize = notification_center_frontend_app_item_finalize;
}


static void
notification_center_frontend_app_item_instance_init (NotificationCenterFrontendAppItem * self)
{
	self->priv = notification_center_frontend_app_item_get_instance_private (self);
	self->priv->current_frame = 1;
}


static void
notification_center_frontend_app_item_finalize (GObject * obj)
{
	NotificationCenterFrontendAppItem * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, NOTIFICATION_CENTER_FRONTEND_TYPE_APP_ITEM, NotificationCenterFrontendAppItem);
	_g_object_unref0 (self->priv->icon);
	_g_free0 (self->priv->label);
	_g_object_unref0 (self->priv->wrapper);
	G_OBJECT_CLASS (notification_center_frontend_app_item_parent_class)->finalize (obj);
}


GType
notification_center_frontend_app_item_get_type (void)
{
	static volatile gsize notification_center_frontend_app_item_type_id__volatile = 0;
	if (g_once_init_enter (&notification_center_frontend_app_item_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (NotificationCenterFrontendAppItemClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) notification_center_frontend_app_item_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (NotificationCenterFrontendAppItem), 0, (GInstanceInitFunc) notification_center_frontend_app_item_instance_init, NULL };
		GType notification_center_frontend_app_item_type_id;
		notification_center_frontend_app_item_type_id = g_type_register_static (gtk_event_box_get_type (), "NotificationCenterFrontendAppItem", &g_define_type_info, 0);
		NotificationCenterFrontendAppItem_private_offset = g_type_add_instance_private (notification_center_frontend_app_item_type_id, sizeof (NotificationCenterFrontendAppItemPrivate));
		g_once_init_leave (&notification_center_frontend_app_item_type_id__volatile, notification_center_frontend_app_item_type_id);
	}
	return notification_center_frontend_app_item_type_id__volatile;
}



