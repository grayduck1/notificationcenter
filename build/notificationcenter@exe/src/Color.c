/* Color.c generated by valac 0.42.5, the Vala compiler
 * generated from Color.vala, do not modify */

/*
* Copyright (c) 2011-2020 NotificationCenter
*
* This program is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public
* License as published by the Free Software Foundation; either
* version 2 of the License, or (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
* General Public License for more details.
*
* You should have received a copy of the GNU General Public
* License along with this program; if not, write to the
* Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
* Boston, MA 02110-1301 USA
*
* Authored by: Juan Pablo Lozano <libredeb@gmail.com>
*/


#include <glib.h>
#include <glib-object.h>
#include <float.h>
#include <math.h>
#include <string.h>


#define NOTIFICATION_CENTER_FRONTEND_TYPE_COLOR (notification_center_frontend_color_get_type ())
typedef struct _NotificationCenterFrontendColor NotificationCenterFrontendColor;
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _vala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _vala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _vala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _NotificationCenterFrontendColor {
	gdouble R;
	gdouble G;
	gdouble B;
	gdouble A;
};



GType notification_center_frontend_color_get_type (void) G_GNUC_CONST;
NotificationCenterFrontendColor* notification_center_frontend_color_dup (const NotificationCenterFrontendColor* self);
void notification_center_frontend_color_free (NotificationCenterFrontendColor* self);
void notification_center_frontend_color_init (NotificationCenterFrontendColor *self,
                                              gdouble R,
                                              gdouble G,
                                              gdouble B,
                                              gdouble A);
void notification_center_frontend_color_set_val (NotificationCenterFrontendColor *self,
                                                 gdouble val,
                                                 NotificationCenterFrontendColor* result);
static void notification_center_frontend_color_rgb_to_hsv (NotificationCenterFrontendColor *self,
                                                    gdouble r,
                                                    gdouble g,
                                                    gdouble b,
                                                    gdouble* h,
                                                    gdouble* s,
                                                    gdouble* v);
static void notification_center_frontend_color_hsv_to_rgb (NotificationCenterFrontendColor *self,
                                                    gdouble h,
                                                    gdouble s,
                                                    gdouble v,
                                                    gdouble* r,
                                                    gdouble* g,
                                                    gdouble* b);
void notification_center_frontend_color_multiply_sat (NotificationCenterFrontendColor *self,
                                                      gdouble amount,
                                                      NotificationCenterFrontendColor* result);


void
notification_center_frontend_color_init (NotificationCenterFrontendColor *self,
                                         gdouble R,
                                         gdouble G,
                                         gdouble B,
                                         gdouble A)
{
	memset (self, 0, sizeof (NotificationCenterFrontendColor));
	(*self).R = R;
	(*self).G = G;
	(*self).B = B;
	(*self).A = A;
}


void
notification_center_frontend_color_set_val (NotificationCenterFrontendColor *self,
                                            gdouble val,
                                            NotificationCenterFrontendColor* result)
{
	gdouble h = 0.0;
	gdouble s = 0.0;
	gdouble v = 0.0;
	gdouble _tmp0_;
	gdouble _tmp1_;
	gdouble _tmp2_;
	gdouble _tmp3_ = 0.0;
	gdouble _tmp4_ = 0.0;
	gdouble _tmp5_ = 0.0;
	gdouble _tmp6_;
	gdouble _tmp7_ = 0.0;
	gdouble _tmp8_ = 0.0;
	gdouble _tmp9_ = 0.0;
	_vala_return_if_fail ((val >= ((gdouble) 0)) && (val <= ((gdouble) 1)), "val >= 0 && val <= 1");
	_tmp0_ = (*self).R;
	_tmp1_ = (*self).G;
	_tmp2_ = (*self).B;
	notification_center_frontend_color_rgb_to_hsv (&(*self), _tmp0_, _tmp1_, _tmp2_, &_tmp3_, &_tmp4_, &_tmp5_);
	h = _tmp3_;
	s = _tmp4_;
	v = _tmp5_;
	v = val;
	_tmp6_ = v;
	notification_center_frontend_color_hsv_to_rgb (&(*self), h, s, _tmp6_, &_tmp7_, &_tmp8_, &_tmp9_);
	(*self).R = _tmp7_;
	(*self).G = _tmp8_;
	(*self).B = _tmp9_;
	*result = (*self);
	return;
}


void
notification_center_frontend_color_multiply_sat (NotificationCenterFrontendColor *self,
                                                 gdouble amount,
                                                 NotificationCenterFrontendColor* result)
{
	gdouble h = 0.0;
	gdouble s = 0.0;
	gdouble v = 0.0;
	gdouble _tmp0_;
	gdouble _tmp1_;
	gdouble _tmp2_;
	gdouble _tmp3_ = 0.0;
	gdouble _tmp4_ = 0.0;
	gdouble _tmp5_ = 0.0;
	gdouble _tmp6_;
	gdouble _tmp7_;
	gdouble _tmp8_ = 0.0;
	gdouble _tmp9_ = 0.0;
	gdouble _tmp10_ = 0.0;
	_vala_return_if_fail (amount >= ((gdouble) 0), "amount >= 0");
	_tmp0_ = (*self).R;
	_tmp1_ = (*self).G;
	_tmp2_ = (*self).B;
	notification_center_frontend_color_rgb_to_hsv (&(*self), _tmp0_, _tmp1_, _tmp2_, &_tmp3_, &_tmp4_, &_tmp5_);
	h = _tmp3_;
	s = _tmp4_;
	v = _tmp5_;
	_tmp6_ = s;
	s = fmin ((gdouble) 1, _tmp6_ * amount);
	_tmp7_ = s;
	notification_center_frontend_color_hsv_to_rgb (&(*self), h, _tmp7_, v, &_tmp8_, &_tmp9_, &_tmp10_);
	(*self).R = _tmp8_;
	(*self).G = _tmp9_;
	(*self).B = _tmp10_;
	*result = (*self);
	return;
}


static void
notification_center_frontend_color_rgb_to_hsv (NotificationCenterFrontendColor *self,
                                               gdouble r,
                                               gdouble g,
                                               gdouble b,
                                               gdouble* h,
                                               gdouble* s,
                                               gdouble* v)
{
	gdouble _vala_h = 0.0;
	gdouble _vala_s = 0.0;
	gdouble _vala_v = 0.0;
	gdouble min = 0.0;
	gdouble max = 0.0;
	gdouble _tmp0_;
	gdouble _tmp1_;
	gdouble _tmp2_;
	gdouble _tmp3_;
	gdouble _tmp4_;
	gdouble delta = 0.0;
	gdouble _tmp5_;
	gdouble _tmp6_;
	gdouble _tmp7_;
	gdouble _tmp8_;
	gdouble _tmp9_;
	gdouble _tmp10_;
	gdouble _tmp11_;
	gdouble _tmp12_;
	gdouble _tmp13_;
	gdouble _tmp14_;
	gdouble _tmp15_;
	_vala_return_if_fail ((r >= ((gdouble) 0)) && (r <= ((gdouble) 1)), "r >= 0 && r <= 1");
	_vala_return_if_fail ((g >= ((gdouble) 0)) && (g <= ((gdouble) 1)), "g >= 0 && g <= 1");
	_vala_return_if_fail ((b >= ((gdouble) 0)) && (b <= ((gdouble) 1)), "b >= 0 && b <= 1");
	min = fmin (r, fmin (g, b));
	max = fmax (r, fmax (g, b));
	_tmp0_ = max;
	_vala_v = _tmp0_;
	_tmp1_ = _vala_v;
	if (_tmp1_ == ((gdouble) 0)) {
		_vala_h = (gdouble) 0;
		_vala_s = (gdouble) 0;
		if (h) {
			*h = _vala_h;
		}
		if (s) {
			*s = _vala_s;
		}
		if (v) {
			*v = _vala_v;
		}
		return;
	}
	_tmp2_ = _vala_v;
	r = r / _tmp2_;
	_tmp3_ = _vala_v;
	g = g / _tmp3_;
	_tmp4_ = _vala_v;
	b = b / _tmp4_;
	min = fmin (r, fmin (g, b));
	max = fmax (r, fmax (g, b));
	_tmp5_ = max;
	_tmp6_ = min;
	delta = _tmp5_ - _tmp6_;
	_tmp7_ = delta;
	_vala_s = _tmp7_;
	_tmp8_ = _vala_s;
	if (_tmp8_ == ((gdouble) 0)) {
		_vala_h = (gdouble) 0;
		if (h) {
			*h = _vala_h;
		}
		if (s) {
			*s = _vala_s;
		}
		if (v) {
			*v = _vala_v;
		}
		return;
	}
	_tmp9_ = min;
	_tmp10_ = delta;
	r = (r - _tmp9_) / _tmp10_;
	_tmp11_ = min;
	_tmp12_ = delta;
	g = (g - _tmp11_) / _tmp12_;
	_tmp13_ = min;
	_tmp14_ = delta;
	b = (b - _tmp13_) / _tmp14_;
	_tmp15_ = max;
	if (_tmp15_ == r) {
		gdouble _tmp16_;
		_vala_h = 0 + (60 * (g - b));
		_tmp16_ = _vala_h;
		if (_tmp16_ < ((gdouble) 0)) {
			gdouble _tmp17_;
			_tmp17_ = _vala_h;
			_vala_h = _tmp17_ + 360;
		}
	} else {
		gdouble _tmp18_;
		_tmp18_ = max;
		if (_tmp18_ == g) {
			_vala_h = 120 + (60 * (b - r));
		} else {
			_vala_h = 240 + (60 * (r - g));
		}
	}
	if (h) {
		*h = _vala_h;
	}
	if (s) {
		*s = _vala_s;
	}
	if (v) {
		*v = _vala_v;
	}
}


static void
notification_center_frontend_color_hsv_to_rgb (NotificationCenterFrontendColor *self,
                                               gdouble h,
                                               gdouble s,
                                               gdouble v,
                                               gdouble* r,
                                               gdouble* g,
                                               gdouble* b)
{
	gdouble _vala_r = 0.0;
	gdouble _vala_g = 0.0;
	gdouble _vala_b = 0.0;
	_vala_return_if_fail ((h >= ((gdouble) 0)) && (h <= ((gdouble) 360)), "h >= 0 && h <= 360");
	_vala_return_if_fail ((s >= ((gdouble) 0)) && (s <= ((gdouble) 1)), "s >= 0 && s <= 1");
	_vala_return_if_fail ((v >= ((gdouble) 0)) && (v <= ((gdouble) 1)), "v >= 0 && v <= 1");
	_vala_r = (gdouble) 0;
	_vala_g = (gdouble) 0;
	_vala_b = (gdouble) 0;
	if (s == ((gdouble) 0)) {
		_vala_r = v;
		_vala_g = v;
		_vala_b = v;
	} else {
		gint secNum = 0;
		gdouble fracSec = 0.0;
		gdouble p = 0.0;
		gdouble q = 0.0;
		gdouble t = 0.0;
		gint _tmp0_;
		gdouble _tmp1_;
		gdouble _tmp2_;
		gint _tmp3_;
		secNum = (gint) floor (h / 60);
		_tmp0_ = secNum;
		fracSec = (h / 60) - _tmp0_;
		p = v * (1 - s);
		_tmp1_ = fracSec;
		q = v * (1 - (s * _tmp1_));
		_tmp2_ = fracSec;
		t = v * (1 - (s * (1 - _tmp2_)));
		_tmp3_ = secNum;
		switch (_tmp3_) {
			case 0:
			{
				gdouble _tmp4_;
				gdouble _tmp5_;
				_vala_r = v;
				_tmp4_ = t;
				_vala_g = _tmp4_;
				_tmp5_ = p;
				_vala_b = _tmp5_;
				break;
			}
			case 1:
			{
				gdouble _tmp6_;
				gdouble _tmp7_;
				_tmp6_ = q;
				_vala_r = _tmp6_;
				_vala_g = v;
				_tmp7_ = p;
				_vala_b = _tmp7_;
				break;
			}
			case 2:
			{
				gdouble _tmp8_;
				gdouble _tmp9_;
				_tmp8_ = p;
				_vala_r = _tmp8_;
				_vala_g = v;
				_tmp9_ = t;
				_vala_b = _tmp9_;
				break;
			}
			case 3:
			{
				gdouble _tmp10_;
				gdouble _tmp11_;
				_tmp10_ = p;
				_vala_r = _tmp10_;
				_tmp11_ = q;
				_vala_g = _tmp11_;
				_vala_b = v;
				break;
			}
			case 4:
			{
				gdouble _tmp12_;
				gdouble _tmp13_;
				_tmp12_ = t;
				_vala_r = _tmp12_;
				_tmp13_ = p;
				_vala_g = _tmp13_;
				_vala_b = v;
				break;
			}
			case 5:
			{
				gdouble _tmp14_;
				gdouble _tmp15_;
				_vala_r = v;
				_tmp14_ = p;
				_vala_g = _tmp14_;
				_tmp15_ = q;
				_vala_b = _tmp15_;
				break;
			}
			default:
			break;
		}
	}
	if (r) {
		*r = _vala_r;
	}
	if (g) {
		*g = _vala_g;
	}
	if (b) {
		*b = _vala_b;
	}
}


NotificationCenterFrontendColor*
notification_center_frontend_color_dup (const NotificationCenterFrontendColor* self)
{
	NotificationCenterFrontendColor* dup;
	dup = g_new0 (NotificationCenterFrontendColor, 1);
	memcpy (dup, self, sizeof (NotificationCenterFrontendColor));
	return dup;
}


void
notification_center_frontend_color_free (NotificationCenterFrontendColor* self)
{
	g_free (self);
}


GType
notification_center_frontend_color_get_type (void)
{
	static volatile gsize notification_center_frontend_color_type_id__volatile = 0;
	if (g_once_init_enter (&notification_center_frontend_color_type_id__volatile)) {
		GType notification_center_frontend_color_type_id;
		notification_center_frontend_color_type_id = g_boxed_type_register_static ("NotificationCenterFrontendColor", (GBoxedCopyFunc) notification_center_frontend_color_dup, (GBoxedFreeFunc) notification_center_frontend_color_free);
		g_once_init_leave (&notification_center_frontend_color_type_id__volatile, notification_center_frontend_color_type_id);
	}
	return notification_center_frontend_color_type_id__volatile;
}



